# run&#46;kali&#46;x86_64&#46;sh

>**You are here: [░▒▓ pentesting-cookbook ▓▒░](../README.md)  &rarr;  [run.kali.x86_64.sh](run.kali.md)**

## Step 1: Preflight Checks and Environment Setup
><br />**Check for root**<br />
> ```bash
>   if [ "$(id -u)" != "0" ]; then
>     echo "Must be run as root!" 1>&2
>     exit 1
>   fi
> ``` 


>**Setup Non-interactive Shell**<br />
>```bash
>export DEBIAN_FRONTEND=noninteractive
>```
>
>**Frontends**<br />
>One of debconf's unique features is that the interface it presents to you is only one of many, that can be swapped in at will. There are many debconf frontends available:<br />
>* **noninteractive** - This is the anti-frontend. It never interacts with you  at  all and  makes  the  default  answers  be used for all questions. It might mail error messages to root, but that's it; otherwise it is  completely  silent  and  unobtrusive, a perfect frontend for automatic installs.<br />
>&ensp;

><br />**Get / Set Environment Variables**<br />
> ```bash
>    OLD_PWD=$PWD
>    BASE_PATH=$(dirname $(realpath $0))
>    DEFAULT_USERNAME=$(cat /etc/group | grep sudo | cut -d: -f4 | cut -d, -f1)
>    DEFAULT_SSHD_PORT=60022
>
>    read -p "Your normal user account (additional tools will be installed in ~/lib): [$DEFAULT_USERNAME] " USERNAME
>
>    USERNAME=${USERNAME:-$DEFAULT_USERNAME}
>
>    read -p "SSH daemon port: [$DEFAULT_SSHD_PORT] " SSHD_PORT
>
>    SSHD_PORT=${SSHD_PORT:-$DEFAULT_SSHD_PORT}
> ```
> <br />

## Step 2: Run through Installation Steps
>**Initialize Subroutine to Run Steps**<br />
>```bash
>subsource() {
>    echo -e "\n\e[93m░▒▓ $2 ▓▒░\e[0m\n"
>    . $BASE_PATH/$1
>    if [ $? -eq 0 ]; then
>        echo -e "\e[32m+ Done!\e[0m";
>    else
>        echo -e "\n\e[91;5m░▒▓ $2 failed! ▓▒░\e[0m\n"; exit;
>    fi
>    cd $OLD_PWD
>}
>``` 
>&nbsp;

>**Get Prerequisite Packages and Harden System**<br />
>```bash
>subsource 'kali.locale.sh' 'Setting locale'
>subsource 'kali.update.sh' 'Updating'
>subsource 'kali.deps.base.sh' 'Installing base packages'
>subsource 'kali.deps.src.sh' 'Installing external packages'
>subsource 'kali.env.sh' 'Configuring environment'
>subsource 'kali.hardening.sh' 'Hardening'
>```
>* [bootstrap/kali.locale.sh](kali.locale.md)
>* [bootstrap/kali.update.sh](kali.update.md)
>* [bootstrap/kali.deps.base.sh](kali.deps.base.md)
>* [bootstrap/kali.deps.src.sh](kali.deps.src.md)
>* [bootstrap/kali.env.sh](kali.env.md)
>* [bootstrap/kali.hardening.sh](kali.hardening.md)

>**Disable IPv6**<br />
>```bash
>while true; do
>    read -p 'Disable IPv6? (y/n): ' answer
>    case $answer in
>        [Yy]* ) subsource 'kali.disable.ipv6.sh' 'Disabling IPv6'; break;;
>        [Nn]* ) break;;
>        * ) echo 'Answer yes or no.';;
>    esac
>done
>```
>&nbsp;


>**Enable automatic host name changing**<br />
>```bash
>while true; do
>    read -p 'Enable host name changing? (y/n): ' answer
>    case $answer in
>        [Yy]* ) subsource 'kali.enable.namechange.sh' 'Enabling name change'; break;;
>        [Nn]* ) break;;
>        * ) echo 'Answer yes or no.';;
>    esac
>done
>```
>&nbsp;
