#!/bin/bash

if [[ -z $1 ]]; then
    echo "Usage: cnames.sh domains-newlines.txt"
    exit 1
fi

for domain in $(cat $1); do
    result=`dig +noall +answer $domain -t cname | cut -f6`
    if [[ -n $result ]]; then
        echo "$domain -> $result"
    fi
done
